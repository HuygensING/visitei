<ivysettings>
  <!--
    This property is used later in the ivy.xml file to set
    the project's revision. Unless overridden, it defaults
    to the Maven SNAPSHOT convention, as that it works well
    for publishing local test builds to ~/.m2/repository.
  -->
  <property name="revision" value="0.1-SNAPSHOT" override="false"/>

  <!-- "default" is defined later in the file. -->
  <settings defaultResolver="default" />

  <!-- Pulls in the "public" resolver for ibiblio-hosted jars. -->
  <include url="${ivy.default.settings.dir}/ivysettings-public.xml"/>

  <resolvers>
    <!-- add any 3rd-party maven repos here... -->
    <ibiblio name="sun-repo-2" m2compatible="true" root="http://download.java.net/maven/2/" />
    <ibiblio name="huygens" m2compatible="true" root="http://maven.huygens.knaw.nl/repository/" />

    <!--
      for *retrieving* artifacts for local testing builds,
      we'll use maven's own .m2/repository.
    -->
    <ibiblio name="local-m2" m2compatible="true" root="file://${user.home}/.m2/repository" changingPattern=".*SNAPSHOT"/>

    <!--
      for *publishing* artifacts for local testing builds,
      as the previous ibiblio resolver does not support publishing
    -->
    <filesystem name="local-m2-publish" m2compatible="true">
      <artifact pattern="${user.home}/.m2/repository/[organisation]/[module]/[revision]/[artifact]-[revision](-[classifier]).[ext]"/>
    </filesystem>

    <!-- EXAMPLE - NOT USED
      for publishing release artifacts via an sshfs-mounted share
    -->
    <filesystem name="share-m2" m2compatible="true">
      <artifact pattern="${user.home}/repo/[organisation]/[module]/[revision]/[artifact]-[revision](-[classifier]).[ext]"/>
    </filesystem>

    <!-- strings the separate resolvers all together -->
    <chain name="default" changingPattern=".*SNAPSHOT">
      <resolver ref="public"/>
      <resolver ref="sun-repo-2"/>
      <resolver ref="huygens"/>
      <!--
        Potential gotcha: you want your local-m2 to be last, or at least
        after the public repo. Otherwise maven proper might partially
        download a project into ~/.m2, but not include sources, and if
        local-m2 is first, ivy will pull the artifacts out of ~/.m2 and
        cache the partially-downloaded view of the repo (i.e. no sources).
        If public is first, ivy will always try to get artifacts from their
        canonical source.
      -->
      <resolver ref="local-m2"/>
    </chain>
  </resolvers>

</ivysettings>
